[profile.default]
src = "src"
out = "out"
test = "test"
libs = ["lib"]
solc = "0.8.26"
optimizer = true
optimizer_runs = 200
via_ir = false
evm_version = "cancun"
remappings = ["forge-std/=lib/forge-std/src/"]

# Fork configuration for mainnet testing (commented out for basic build)
# eth_rpc_url = "https://mainnet.infura.io/v3/bfc7283659224dd6b5124ebbc2b14e2c"
# fork_block_number = 19000000

# Gas settings
gas_limit = 30000000
gas_price = 0
block_gas_limit = 30000000

# Test settings
verbosity = 3
fuzz = { runs = 1000, max_test_rejects = 65536 }
invariant = { runs = 256, depth = 15, fail_on_revert = false }

# RPC endpoints for different networks
[rpc_endpoints]
mainnet = "https://mainnet.infura.io/v3/bfc7283659224dd6b5124ebbc2b14e2c"
arbitrum = "https://arb-mainnet.g.alchemy.com/v2/demo"
optimism = "https://opt-mainnet.g.alchemy.com/v2/demo"
polygon = "https://polygon-mainnet.g.alchemy.com/v2/demo"
bsc = "https://bsc-dataseed.binance.org/"

# Etherscan API keys for verification and source code fetching
[etherscan]
mainnet = { key = "5UWN6DNT7UZCEJYNE3J6FCVAWH4QJW255K" }
arbitrum = { key = "5UWN6DNT7UZCEJYNE3J6FCVAWH4QJW255K", url = "https://api.arbiscan.io/api" }
optimism = { key = "5UWN6DNT7UZCEJYNE3J6FCVAWH4QJW255K", url = "https://api-optimistic.etherscan.io/api" }
polygon = { key = "5UWN6DNT7UZCEJYNE3J6FCVAWH4QJW255K", url = "https://api.polygonscan.com/api" }
bsc = { key = "5UWN6DNT7UZCEJYNE3J6FCVAWH4QJW255K", url = "https://api.bscscan.com/api" }

# Fuzz test profile with more iterations
[profile.fuzz]
fuzz = { runs = 10000, max_test_rejects = 100000 }
invariant = { runs = 1000, depth = 50 }

# Quick test profile for development
[profile.quick]
fuzz = { runs = 100 }
invariant = { runs = 50, depth = 5 }

# Deep analysis profile
[profile.deep]
fuzz = { runs = 50000, max_test_rejects = 500000 }
invariant = { runs = 5000, depth = 100 }
verbosity = 4

# Mainnet fork profile
[profile.fork]
eth_rpc_url = "https://mainnet.infura.io/v3/bfc7283659224dd6b5124ebbc2b14e2c"
fork_block_number = 19000000
verbosity = 3

# BSC fork profile
[profile.bsc]
eth_rpc_url = "https://bsc-dataseed.binance.org/"
verbosity = 3

